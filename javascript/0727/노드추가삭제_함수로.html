<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공부할 주제</title>
    <style>
        li{cursor: pointer;}
    </style>
</head>
<body>
    <div id="container">
        <h1>공부할 주제</h1>
        <p>공부할 내용을 기록해 보세요.</p>
        <form>
            <input type="text" id="item" autofocus="true">
            <button type="button" id="add" class="addBtn"> ADD </button>
        </form>
        <!-- 표시할 영역 -->
        <div id="itemList"></div>
    </div>

    <script>
        let itemList = [];  // 비어있는 배열모양을 만듦
        let addBtn = document.querySelector('#add');
         //이벤트 실행법 1
        addBtn.addEventListener('click', addList);

        //이벤트 실행법 2
        // addBtn.onclick = addList;

        function addList(){
            let item = document.querySelector("#item").value;   //택스트 필드 내용을 가져오기
            console.log(item);  //추가내용 콘솔창 확인
            if(item != null){
                // itemList.push(item);   //itemList배열의 끝에 item변수 값 추가  
                itemList.unshift(item) // 해당 배열의 처음에 추가
                document.querySelector("#item").value = '';
                document.querySelector("#item").focus();
            }
            localStorage.setItem('storageList', JSON.stringify(itemList));  //로컬 스토리지에 저장
            showList();
        }

        function showList(){    //위에 만들어진 addList를 화면에 보이게 처리
            let list = '<ul>'    //목록을 시작하는 <ul>태그 지정
            for (let i =0; i < itemList.length; i++) {       //배열요소마다 반복
                list+="<li>" + itemList[i] + "<span class='close' id="+ i +"> X </span></li>";
            }

            list +='</ul>';  //list = list + '</ul>' 목록을 끝내는 부분    
            document.querySelector('#itemList').innerHTML = list;    //위에서 정의한 list내용을 div에 출력이되게

            //리스트 제거하기     해당 버튼 클릭시 removelist()실행
            let remove = document.querySelectorAll('.close');  //삭제 버튼 변수로 저장.배열형태
            for (let i = 0; i <remove.length; i++){
                remove[i].addEventListener('click', removeList);
            }
        }

        function removeList(){
            // console.log(this);   //클릭한 id = i번째 확인
            let id = this.getAttribute('id');  // 클릭 id값 가져와 id 변수에 저장
            itemList.splice(id,1);  //itemList 배열에서 인덱스 값이 id인 요소 1개 삭제
            showList();   //변경된 부분 화면에 표시
            localStorage.setItem('storageList', JSON.stringify(itemList));
        }

        //-----------------------------
            //at console//
        //localstorage.setItem(key값, value값)
        //localstorage.getItem(key값)
        //localstorage.clear()   :  지우기

        //배열형태로 저장
        //let array=[1,2,3]
        //localstorage.setItem('key값', JSON.stringify(array));
        //로컬스토리지에서 가져오기
        //let todo = localStorage.getItem('key값');
        //JSON.parse(todo);

        //여러 값으로 된 문자열을 가져와 배열 형태로 변환할 때는 JSON.parse() 메서드를 사용
        //JSON은 자료를 주고 받는 방식을 가리키는 말로자바스크립트 객체를 정의하는 것과 같은 방법으로 사용
    </script>
</body>
</html>